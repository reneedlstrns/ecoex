<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Manage Profile - EcoExchange</title>
</head>
<body>


<div id="overlay"></div>

<div id="editProfileForm">
    <h2>Edit Profile</h2>
    <form action="/profile/update" method="POST">
        <div class="row mb-3">
            <div class="col-md-6">
                <label for="fname" class="form-label">First Name</label>
                <input type="text" class="form-control" id="fname" name="fname" value="{{ user.fname }}" required>
            </div>
            <div class="col-md-6">
                <label for="lname" class="form-label">Last Name</label>
                <input type="text" class="form-control" id="lname" name="lname" value="{{ user.lname }}" required>
            </div>
        </div>
        <div class="row mb-3">
            <div class="col-md-6">
                <label for="company" class="form-label">Company</label>
                <input type="text" class="form-control" id="company" name="company" value="{{ user.company }}" required>
            </div>
            <div class="col-md-6">
                <label for="nick_name" class="form-label">Nickname</label>
                <input type="text" class="form-control" id="nick_name" name="nick_name" value="{{ user.nick_name }}" required>
            </div>
        </div>
        <div class="row mb-3">
            <div class="col-md-6">
                <label for="email" class="form-label">Email</label>
                <input type="email" class="form-control" id="email" name="email" value="{{ user.email }}" required>
            </div>
            <div class="col-md-6">
                <label for="mobile" class="form-label">Mobile</label>
                <input type="text" class="form-control" id="mobile" name="mobile" value="{{ user.mobile }}" required>
            </div>
        </div>
        <div class="row mb-3">
            <div class="col-md-12">
                <label for="location_title" class="form-label">Location Title</label>
                <input type="text" class="form-control" id="location_title" name="location_title" value="{{ user.location_title }}" required>
            </div>
        </div>
        <div class="row mb-3">
            <div class="col-md-6">
                <label for="address" class="form-label">Address</label>
                <input type="text" class="form-control" id="address" name="address" value="{{ user.address }}" required>
            </div>
            <div class="col-md-6">
                <label for="city" class="form-label">City</label>
                <input type="text" class="form-control" id="city" name="city" value="{{ user.city }}" required>
            </div>
        </div>
        <button type="submit" class="btn btn-primary">Update Profile</button>
    </form>
</div>

<script>
    document.getElementById('settingsButton').addEventListener('click', function() {
        var editForm = document.getElementById('editProfileForm');
        var overlay = document.getElementById('overlay');
        if (editForm.style.display === 'none' || editForm.style.display === '') {
            editForm.style.display = 'block';
            overlay.style.display = 'block';
        } else {
            editForm.style.display = 'none';
            overlay.style.display = 'none';
        }
    });

    document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape') {
            var editForm = document.getElementById('editProfileForm');
            var overlay = document.getElementById('overlay');
            editForm.style.display = 'none';
            overlay.style.display = 'none';
        }
    });
</script>

</body>
</html>